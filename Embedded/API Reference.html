<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartDevice Class API Reference</title>
    <style>
        /*
        ====================================================================
          Modern Dark Theme CSS for Markdown Documents v2.0
        ====================================================================
          - Font: Google Product Sans
          - Style: Dark, pageless, Google Material Design inspired
          - Added C++ Syntax Highlighting
        ====================================================================
        */

        /* --- Import Google's Product Sans Font --- */
        @import url('https://fonts.googleapis.com/css2?family=Product+Sans:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap');

        /* --- Main Body & Document Styling --- */
        body {
            font-family: 'Product Sans', sans-serif, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #202124;
            /* Google's dark grey background */
            color: #e8eaed;
            /* Light grey text for readability */
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        /* --- Main Content Container --- */
        main {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px 40px;
            background-color: #2d2e30;
            border: 1px solid #3c4043;
            border-radius: 12px;
        }

        /* --- Typography --- */
        h1,
        h2,
        h3,
        h4 {
            color: #f1f3f4;
            font-weight: 700;
            border-bottom: 1px solid #3c4043;
            padding-bottom: 8px;
            margin-top: 24px;
            margin-bottom: 16px;
        }

        h1 {
            font-size: 2.5em;
            padding-bottom: 12px;
            text-align: center;
        }

        h2 {
            font-size: 2em;
        }

        h3 {
            font-size: 1.5em;
            border-bottom: none;
        }

        h4 {
            font-size: 1.2em;
            color: #bdc1c6;
            border-bottom: none;
            margin-top: 32px;
        }

        h3 code {
            font-size: 0.8em;
            color: #8ab4f8;
        }

        p {
            font-size: 1em;
            margin-bottom: 16px;
        }

        strong {
            color: #e8eaed;
            font-weight: 700;
        }

        /* --- Links --- */
        a {
            color: #8ab4f8;
            text-decoration: none;
            transition: color 0.2s ease-in-out;
        }

        a:hover {
            color: #a7c5f9;
            text-decoration: underline;
        }

        /* --- Code Blocks (General) --- */
        code {
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
            background-color: #202124;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #bdc1c6;
        }

        pre {
            background-color: #1e1e1e;
            border: 1px solid #3c4043;
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        pre code {
            background-color: transparent;
            padding: 0;
            border-radius: 0;
            font-size: 0.9em;
            line-height: 1.5;
            color: #e8eaed;
        }

        /* --- NEW: C++ Syntax Highlighting --- */
        .sh-preprocessor {
            color: #c586c0;
        }

        /* #include */
        .sh-keyword {
            color: #569cd6;
        }

        /* void, if, else */
        .sh-type {
            color: #4ec9b0;
        }

        /* String, CommandCallback, SmartDevice */
        .sh-function {
            color: #dcdcaa;
        }

        /* myDevice.publish, pinMode */
        .sh-variable {
            color: #9cdcfe;
        }

        /* payload, command */
        .sh-string {
            color: #ce9178;
        }

        /* "Hello World" */
        .sh-comment {
            color: #6a9955;
        }

        /* // This is a comment */
        .sh-literal {
            color: #b5cea8;
        }

        /* HIGH, INPUT */

        /* --- Other Elements --- */
        ul,
        ol {
            padding-left: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        li>p {
            margin-bottom: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
        }

        th,
        td {
            border: 1px solid #3c4043;
            padding: 12px 15px;
            text-align: left;
        }

        thead {
            background-color: #3c4043;
            color: #f1f3f4;
            font-weight: 700;
        }

        tbody tr:nth-child(even) {
            background-color: #282a2c;
        }

        hr {
            border: none;
            border-top: 1px solid #3c4043;
            margin: 40px 0;
        }

        .license {
            text-align: center;
            font-style: italic;
            color: #9aa0a6;
            margin-top: 40px;
        }
    </style>
</head>

<body>
    <main>
        <div id="api-reference" class="page">
            <h1 class="text-4xl md:text-5xl font-bold text-center text-primary mb-4">API Reference: SmartDevice Library
            </h1>
            <p class="text-center text-secondary text-lg mb-8">This is your reference for the <code>SmartDevice</code>
                library, your tool for connecting your IoT device to the Smart Classroom Hub.</p>

            <hr />

            <h2 class="text-3xl font-bold text-primary border-b border-custom-border pb-3 mb-6">GPIO Pin Definitions
            </h2>
            <p class="text-secondary">Use these friendly pin names in your code to avoid conflicts with system pins.</p>
            <table class="w-full text-left text-secondary">
                <thead>
                    <tr>
                        <th class="py-3 px-4">Macro</th>
                        <th class="py-3 px-4">GPIO Pin</th>
                        <th class="py-3 px-4">Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D0</code></td>
                        <td class="py-2 px-4">16</td>
                        <td class="py-2 px-4">HIGH at boot, used for deep sleep wake.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D1</code></td>
                        <td class="py-2 px-4">5</td>
                        <td class="py-2 px-4">Safe to use. I2C SCL.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D2</code></td>
                        <td class="py-2 px-4">4</td>
                        <td class="py-2 px-4">Safe to use. I2C SDA.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D3</code></td>
                        <td class="py-2 px-4">0</td>
                        <td class="py-2 px-4">Connected to Flash button, boot fails if LOW.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D4</code></td>
                        <td class="py-2 px-4">2</td>
                        <td class="py-2 px-4">HIGH at boot, boot fails if LOW.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D5</code></td>
                        <td class="py-2 px-4">14</td>
                        <td class="py-2 px-4">Safe to use.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D6</code></td>
                        <td class="py-2 px-4">12</td>
                        <td class="py-2 px-4">Safe to use.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D7</code></td>
                        <td class="py-2 px-4">13</td>
                        <td class="py-2 px-4">Safe to use.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>PIN_D8</code></td>
                        <td class="py-2 px-4">15</td>
                        <td class="py-2 px-4">Required for boot, boot fails if HIGH.</td>
                    </tr>
                </tbody>
            </table>

            <h2 class="text-3xl font-bold text-primary border-b border-custom-border pb-3 mb-6">SmartHome Namespace</h2>
            <p class="text-secondary">The <code>SmartHome</code> namespace contains data types for IoT variables,
                simplifying
                how you handle complex data like smart lights.</p>

            <h3 class="text-xl font-bold text-primary mb-3"><code>enum LightType</code></h3>
            <p class="text-secondary mt-2">Defines the type of light being controlled.</p>
            <ul class="list-disc list-inside pl-4 space-y-2 text-secondary">
                <li><code>DIMMABLE</code>: A light that can be turned on/off and have its brightness adjusted.</li>
                <li><code>COLOR</code>: A light that has on/off, brightness, and color (hue/saturation) control.</li>
            </ul>

            <h3 class="text-xl font-bold text-primary mb-3"><code>struct Light</code></h3>
            <p class="text-secondary mt-2">Represents the state of a smart light. The <code>commandToLight</code>
                function
                populates this struct for you from an incoming command.</p>
            <table class="w-full text-left text-secondary">
                <thead>
                    <tr>
                        <th class="py-3 px-4">Member</th>
                        <th class="py-3 px-4">Type</th>
                        <th class="py-3 px-4">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="py-2 px-4"><code>isOn</code></td>
                        <td class="py-2 px-4"><code>bool</code></td>
                        <td class="py-2 px-4"><code>true</code> if ON, <code>false</code> if OFF.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>brightness</code></td>
                        <td class="py-2 px-4"><code>int</code></td>
                        <td class="py-2 px-4">Brightness level (0-100).</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>hue</code></td>
                        <td class="py-2 px-4"><code>int</code></td>
                        <td class="py-2 px-4">Color hue (0-360). Only for <code>COLOR</code> lights.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>saturation</code></td>
                        <td class="py-2 px-4"><code>int</code></td>
                        <td class="py-2 px-4">Color saturation (0-100). Only for <code>COLOR</code> lights.</td>
                    </tr>
                    <tr>
                        <td class="py-2 px-4"><code>type</code></td>
                        <td class="py-2 px-4"><code>LightType</code></td>
                        <td class="py-2 px-4">Specifies if the light is <code>DIMMABLE</code> or <code>COLOR</code>.
                        </td>
                    </tr>
                </tbody>
            </table>

            <h2 class="text-3xl font-bold text-primary border-b border-custom-border pb-3 mb-6">SmartDevice Class</h2>
            <p class="text-secondary">The main class for handling all networking and communication.</p>

            <h3 class="text-xl font-bold text-primary mb-3">Core Methods</h3>
            <div class="highlight-box">
                <h4 class="font-bold text-accent">
                    <code>void begin(const char* deviceName, const char* wifi_ssid, const char* wifi_pass, const char* mqtt_broker)</code>
                </h4>
                <p class="text-sm text-secondary">Initializes the device, connects to Wi-Fi, and connects to the MQTT
                    Hub. Call
                    this once in your main <code>setup()</code> function.</p>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>void update()</code></h4>
                <p class="text-sm text-secondary">Keeps the device connected and processes messages. This <b>must</b> be
                    called
                    in every iteration of your main <code>loop()</code>.</p>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>void publishTo(String fullTopic, String payload)</code></h4>
                <p class="text-sm text-secondary">Publishes a message to a specific MQTT topic. Use this to send sensor
                    data or
                    status updates.</p>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>void subscribeTo(String fullTopic)</code></h4>
                <p class="text-sm text-secondary">Subscribes your device to a topic to receive messages, like commands
                    from the
                    hub.</p>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>void onMessage(MessageCallback callback)</code></h4>
                <p class="text-sm text-secondary">Registers your handler function (like <code>triggerActuator</code>) to
                    be
                    called when any message is received.</p>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>bool isConnected()</code></h4>
                <p class="text-sm text-secondary">Returns <code>true</code> if the device is currently connected to the
                    MQTT
                    Hub, <code>false</code> otherwise.</p>
            </div>

            <h3 class="text-xl font-bold text-primary mb-3">Static Helper Functions</h3>
            <p class="text-secondary">These functions are helpers that you can call directly from the
                <code>SmartDevice</code>
                class without needing an object. They make common tasks, especially for lighting, much simpler.
            </p>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>static SmartHome::Light commandToLight(String command)</code>
                </h4>
                <p class="text-sm text-secondary">Parses an incoming JSON command string into an easy-to-use
                    <code>Light</code>
                    struct. This is the first step in handling any light command.
                </p>
                <pre
                    class="mt-4"><code><span class="sh-comment">// In triggerActuator:</span>
      <span class="sh-class">SmartHome::Light</span> <span class="sh-variable">lightCmd</span> <span class="sh-operator">=</span> <span class="sh-class">SmartDevice</span>::<span class="sh-function">commandToLight</span>(<span class="sh-variable">command</span>);
      <span class="sh-keyword">if</span> (<span class="sh-variable">lightCmd</span>.<span class="sh-variable">isOn</span>) { <span class="sh-comment">/* ... */</span> }</code></pre>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent"><code>static uint32_t getRGB(SmartHome::Light lightCommand)</code>
                </h4>
                <p class="text-sm text-secondary">Converts a <code>Light</code> struct into a single color value that
                    the
                    NeoPixel library can understand. It handles both full color (from hue/saturation) and dimmable white
                    (grayscale).</p>
                <pre class="mt-4"><code><span class="sh-comment">// For NeoPixel strips:</span>
      <span class="sh-variable">strip</span>.<span class="sh-function">fill</span>(<span class="sh-class">SmartDevice</span>::<span class="sh-function">getRGB</span>(<span class="sh-variable">lightCmd</span>));
      <span class="sh-variable">strip</span>.<span class="sh-function">show</span>();</code></pre>
            </div>
            <div class="highlight-box">
                <h4 class="font-bold text-accent">
                    <code>static uint8_t getBrightnessValue(SmartHome::Light lightCommand)</code>
                </h4>
                <p class="text-sm text-secondary">Gets a brightness value (0-255) suitable for a standard dimmable LED
                    using
                    <code>analogWrite()</code>. It converts the 0-100 brightness from the command.
                </p>
                <pre
                    class="mt-4"><code><span class="sh-comment">// For standard dimmable LEDs:</span>
      <span class="sh-function">analogWrite</span>(<span class="sh-variable">BULB_PIN</span>, <span class="sh-class">SmartDevice</span>::<span class="sh-function">getBrightnessValue</span>(<span class="sh-variable">lightCmd</span>));</code></pre>
            </div>
        </div>
    </main>
</body>

</html>